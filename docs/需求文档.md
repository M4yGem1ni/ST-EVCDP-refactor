# ST-EVCDP 学习版重构需求文档

## 1. 项目概述

本项目是ST-EVCDP的学习性重构版本，主要目标是通过实现电动汽车充电需求预测系统来学习Python开发和深度学习模型训练。项目基于深圳电动汽车充电数据集，使用自主实现的Transformer模型替代原项目的PAG模型进行充电需求预测。

**学习重点**：
- Python项目开发与模块化设计
- Transformer模型从零实现
- 深度学习模型训练流程
- 数据处理与可视化技能

## 2. 核心功能需求

### 2.1 数据处理模块
实现完整的数据预处理流程，包括数据清洗、标准化、特征工程和时序数据准备。学习pandas和numpy的高级用法，掌握时间序列数据的处理技巧。

### 2.2 自主Transformer模型
**核心学习目标**：从头实现Transformer架构用于时序预测
- **多头自注意力机制**：学习注意力计算和并行处理
- **位置编码**：实现时间序列的位置嵌入
- **编码器-解码器结构**：适配时序预测任务
- **时空特征融合**：将充电桩空间信息整合到Transformer中

**模型架构**：
```
输入序列 → 嵌入层 → 位置编码 → 多层Transformer编码器 → 全连接层 → 预测输出
```

### 2.3 训练与评估系统
建立完整的模型训练流程，学习深度学习项目的标准开发模式，包括损失函数设计、优化器选择、学习率调度和模型验证。

### 2.4 可视化分析
实现数据分析可视化和模型结果展示，学习matplotlib、seaborn和folium等可视化库的使用。

## 3. 技术实现要求

### 3.1 开发环境
- **Python 3.8+** + **PyTorch 2.0+**
- **核心依赖**：pandas, numpy, matplotlib, seaborn, folium, scikit-learn
- **开发工具**：Jupyter Notebook用于实验，VS Code用于项目开发

### 3.2 项目结构
```
ST-EVCDP-refactor/
├── data/
│   ├── dataset.py          # 数据集类定义
│   ├── preprocessing.py    # 数据预处理
│   └── utils.py           # 数据工具函数
├── models/
│   ├── transformer.py     # 自主实现的Transformer
│   ├── components.py      # 模型组件(注意力、编码器等)
│   └── baselines.py       # 简单基线模型对比
├── training/
│   ├── trainer.py         # 训练循环
│   ├── loss.py           # 损失函数
│   └── optimizer.py      # 优化器配置
├── evaluation/
│   ├── metrics.py        # 评估指标
│   └── validator.py      # 模型验证
├── visualization/
│   ├── plots.py          # 统计图表
│   └── maps.py           # 地图可视化
├── config/
│   └── config.yaml       # 配置文件
├── notebooks/            # 实验笔记本
└── main.py              # 主程序
```

## 4. 学习目标与里程碑

### 4.1 阶段一：数据处理基础
掌握pandas数据操作、时序数据处理和特征工程基本技能。

### 4.2 阶段二：Transformer实现
从零实现Transformer的核心组件，理解自注意力机制和位置编码的原理。

### 4.3 阶段三：模型训练
建立完整的训练流程，学习损失监控、梯度优化和模型调试技巧。

### 4.4 阶段四：结果分析
实现预测结果的可视化分析，对比不同模型的性能表现。

## 5. 性能预期

**明确学习导向**：虽然Transformer模型可能在计算效率和预测精度上不如原项目的PAG模型，但重点在于：
- 完整掌握深度学习项目开发流程
- 深入理解Transformer架构原理
- 积累Python项目开发经验
- 建立模型训练和调试的实践能力

## 6. 输出成果

### 6.1 代码实现
完整的、模块化的Python项目代码，具备良好的代码结构和文档。

### 6.2 实验报告
记录模型训练过程、参数调优经验和性能分析结果。

### 6.3 学习总结
整理Python开发技巧、深度学习实践经验和项目管理心得。专注于通过实际项目开发来掌握Python和深度学习的核心技能。